(this.webpackJsonpsh=this.webpackJsonpsh||[]).push([[0],{114:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(31),s=n.n(a),o=(n(38),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,115)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))}),i=(n(39),n(7)),u=n.n(i),l=n(12),d=n(6),b=n(4),j=n(20),h=n.n(j),p=n(8),m=n(1),O=function(){var e=Object(p.f)(),t=Object(r.useState)(""),n=Object(d.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(""),o=Object(d.a)(s,2),i=o[0],j=o[1],O=function(){var t=Object(l.a)(u.a.mark((function t(n,r){var c,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==r){t.next=2;break}return t.abrupt("return",alert("Username is required"));case 2:return t.next=4,window.fetch("/api/lobby.join",{method:"POST",headers:{"content-type":"application/json;charset=UTF-8"},body:JSON.stringify({lobby_code:n,username:r})});case 4:if(!(c=t.sent).ok){t.next=12;break}return t.next=8,c.json();case 8:a=t.sent,e.push("/u/lobby/".concat(n,"/").concat(a.user_id)),t.next=13;break;case 12:alert("Invalid game code");case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return Object(m.jsxs)(b.Column,{className:h.a.join,children:[Object(m.jsx)("div",{className:h.a.header_banner,children:"Join"}),Object(m.jsxs)(b.Column,{children:[Object(m.jsx)(b.Label,{children:"Username"}),Object(m.jsx)(b.Input,{onChange:function(e){return j(e.target.value)},value:i,placeholder:"Username"}),Object(m.jsx)(b.Label,{children:"Game Code"}),Object(m.jsx)(b.Input,{className:h.a.input,title:"Game Code",placeholder:"eg: ABCD123",onChange:function(e){return a(e.target.value)},value:c}),Object(m.jsx)(b.Button,{className:h.a.button,onClick:function(){return O(c,i)},children:"Join"})]})]})},_=n(28),f=n.n(_),x=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),s=Object(d.a)(a,2),o=s[0],i=s[1],j=Object(p.f)();function h(){return(h=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.fetch("/api/lobby.create",{method:"POST",headers:{"content-type":"application/json;charset=UTF-8"},body:JSON.stringify({})});case 2:if(!(t=e.sent).ok){e.next=8;break}return e.next=6,t.json();case 6:n=e.sent,j.push("/lobby/".concat(n.lobby_code));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j.push("/lobby/".concat(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(m.jsxs)(b.Column,{className:f.a.join,children:[Object(m.jsx)("div",{className:f.a.header_banner,children:"Host"}),Object(m.jsxs)(b.Column,{children:[Object(m.jsx)(b.Checkbox,{checked:n,onChange:function(){return c(!n)},children:"Join as Co-Host"}),n?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(b.Label,{children:"Game Code"}),Object(m.jsx)(b.Input,{placeholder:"eg: ABCD123",value:o,onChange:function(e){return i(e.target.value)}})]}):null,Object(m.jsx)("br",{}),Object(m.jsx)(b.Button,{onClick:function(){return n?function(e){return O.apply(this,arguments)}(o):function(){return h.apply(this,arguments)}()},children:"Host Game"})]})]})},v=n(22),y=n.n(v);function g(e){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(b.Columns,{className:y.a.header,children:Object(m.jsx)(b.Column,{children:"The Hive Games"})}),Object(m.jsx)(b.Columns,{className:y.a.mainbody,children:e.children}),Object(m.jsx)(b.Columns,{className:y.a.footer,children:Object(m.jsx)(b.Column,{children:"\xa92021 The Hive Games"})})]})}function C(){return Object(m.jsxs)(g,{children:[Object(m.jsx)(O,{}),Object(m.jsx)(x,{})]})}var S=n(18),k=function(e){var t=e.members,n=e.me;return Object(m.jsxs)(b.Content,{children:[Object(m.jsx)("p",{children:"Users in Lobby"}),Object(m.jsx)("ul",{children:t.map((function(e){return e.id==n?Object(m.jsx)("li",{children:Object(m.jsxs)("strong",{children:[e.username," - YOU"]})},e.id):Object(m.jsx)("li",{children:e.username},e.id)}))})]})},w=n(21),N=n.n(w),T=function(e){var t={game:{status:"",game:"",min_players:10,max_players:10},members:[]},n=Object(r.useState)(10),c=Object(d.a)(n,2),a=c[0],s=c[1],o=Object(r.useState)(5),i=Object(d.a)(o,2),j=i[0],h=i[1],O=Object(r.useState)(t),_=Object(d.a)(O,2),f=_[0],x=_[1],v=Object(r.useState)(""),y=Object(d.a)(v,2),C=y[0],S=y[1],w=Object(r.useState)(""),T=Object(d.a)(w,2),B=T[0],F=T[1],H=Object(p.f)();Object(r.useEffect)((function(){if(S(e.match.params.game_id),F(e.match.params.user_id),C){var t=new EventSource("/api/lobby.events?lobby_code=".concat(C));return t.onmessage=function(e){return J(JSON.parse(e.data))},t.onerror=function(){t.close()},function(){t.close()}}}),[C]);var J=function(){var e=Object(l.a)(u.a.mark((function e(n){var r,c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"in_progress"===(null===n||void 0===n||null===(r=n.game)||void 0===r?void 0:r.status)&&(B?(console.log("game in progress"),H.push("/u/".concat(null===n||void 0===n?void 0:n.game.game,"/").concat(C,"/").concat(B))):H.push("/".concat(null===n||void 0===n?void 0:n.game.game,"/").concat(C))),Object.keys(n).includes("code")?(console.log("error:",n.code,n.error),x(t)):(x(n),s(null===n||void 0===n||null===(c=n.game)||void 0===c?void 0:c.max_players),h(null===n||void 0===n||null===(a=n.game)||void 0===a?void 0:a.min_players));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function U(){return(U=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.fetch("/api/lobby.leave",{method:"POST",headers:{"content-type":"application/json;charset=UTF-8"},body:JSON.stringify({user_id:t,lobby_code:C})});case 2:e.sent.ok&&H.replace("/");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.fetch("/api/game.start",{method:"POST",headers:{"content-type":"application/json;charset=UTF-8"},body:JSON.stringify({lobby_code:C})});case 2:e.sent.ok&&H.replace("/sh/".concat(C));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(m.jsx)(g,{children:Object(m.jsxs)(b.Column,{children:[Object(m.jsx)(b.Columns,{className:a<=(null===f||void 0===f?void 0:f.members.length)&&!B?N.a.full:N.a.bg,children:Object(m.jsxs)(b.Column,{children:[Object(m.jsxs)("strong",{children:["GAME: ","SH"==f.game.game?"Secret Hitler":""]}),Object(m.jsx)("br",{}),a<=(null===f||void 0===f?void 0:f.members.length)&&!B?Object(m.jsx)("p",{className:N.a.gameCode,children:"LOBBY FULL"}):Object(m.jsxs)(m.Fragment,{children:["Game Code: ",Object(m.jsx)("p",{className:N.a.gameCode,children:C})]}),B?Object(m.jsx)(b.Button,{onClick:function(){return function(e){return U.apply(this,arguments)}(B)},children:"Leave"}):null,!B&&(null===f||void 0===f?void 0:f.members.length)>=j?Object(m.jsx)(b.Button,{onClick:function(){return function(){return G.apply(this,arguments)}()},children:"Start"}):null]})}),Object(m.jsx)(b.Columns,{children:Object(m.jsx)(b.Column,{children:Object(m.jsx)(k,{members:null===f||void 0===f?void 0:f.members,me:B})})})]})})},B=n(23),F=n.n(B);function H(e){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(b.Columns,{className:F.a.header,children:Object(m.jsx)(b.Column,{children:"Secret Hitler"})}),Object(m.jsx)(b.Columns,{className:F.a.mainbody,children:e.children}),Object(m.jsx)(b.Columns,{className:F.a.footer,children:Object(m.jsx)(b.Column,{children:"\xa92021 The Hive Games"})})]})}var J=n(17),U=n.n(J);function G(e){var t=e.users,n=e.user_id,c=void 0===n?null:n,a=e.president_id,s=void 0===a?null:a,o=e.chancellor_id,i=void 0===o?null:o,u=Object(r.useState)(!1),l=Object(d.a)(u,2),j=(l[0],l[1]),h=Object(r.useState)(!1),p=Object(d.a)(h,2),O=(p[0],p[1]),_=Object(r.useState)(!1),f=Object(d.a)(_,2),x=f[0],v=f[1];return Object(r.useEffect)((function(){c===s&&j(!0),c===i&&O(!0)}),[s,i]),t?Object(m.jsx)(b.Columns,{className:"".concat(U.a.cardcontainer," ").concat(c&&U.a.pointer),onClick:function(){return v(!x)},children:t.map((function(e){return Object(m.jsxs)(b.Column,{className:"".concat(U.a.usercard," ").concat(e.user_id==s?U.a.president:""," ").concat(c===e.user_id&&e.user_id==s?U.a.youpres:""," ").concat(c&&x?U.a[e.display_role]:""),children:[e.username,Object(m.jsx)("br",{}),c===e.user_id?"YOU":null,Object(m.jsx)("br",{}),c&&x&&"hitler"==e.display_role?Object(m.jsx)("strong",{children:"hitler"}):null]},e.user_id)}))}):null}function P(e){var t=Object(r.useState)(e.match.params.game_id),n=Object(d.a)(t,2),c=n[0],a=(n[1],Object(r.useState)(e.match.params.users)),s=Object(d.a)(a,2),o=s[0],i=s[1],j=Object(r.useState)(),h=Object(d.a)(j,2),p=h[0],O=h[1],_=e.match.params.game_id;Object(r.useEffect)((function(){!function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.fetch("/api/sh.get_users",{method:"POST",headers:{"content-type":"application/json;charset=UTF-8"},body:JSON.stringify({lobby_code:c})});case 2:if(!(n=e.sent).ok){e.next=8;break}return e.next=6,n.json();case 6:r=e.sent,i(r.roles);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(c);var e=new EventSource("/api/sh.events?lobby_code=".concat(c));return e.onmessage=function(e){return f(JSON.parse(e.data))},e.onerror=function(){e.close()},function(){e.close()}}),[]);var f=function(e){console.log(e),O(e)},x=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.fetch("/api/game.end",{method:"POST",headers:{"content-type":"application/json;charset=UTF-8"},body:JSON.stringify({lobby_code:c})});case 2:if(!(t=e.sent).ok){e.next=8;break}return e.next=6,t.json();case 6:n=e.sent,console.log(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsx)(H,{children:Object(m.jsxs)(b.Column,{children:[Object(m.jsx)(b.Columns,{children:Object(m.jsxs)(b.Column,{children:["SecretHitlerHost: ",_,Object(m.jsx)("br",{}),Object(m.jsx)(b.Button,{onClick:function(){return x()},children:"End Game"})]})}),Object(m.jsx)(G,{users:o,president_id:null===p||void 0===p?void 0:p.president_id,chancellor_id:null===p||void 0===p?void 0:p.chancellor_id})]})})}var E=n(33),L=n.n(E);function M(e){var t=Object(r.useState)(e.match.params.game_id),n=Object(d.a)(t,2),c=n[0],a=(n[1],Object(r.useState)()),s=Object(d.a)(a,2),o=s[0],i=s[1],j=Object(r.useState)(),h=Object(d.a)(j,2),p=h[0],O=h[1],_=Object(r.useState)(!1),f=Object(d.a)(_,2),x=f[0],v=f[1],y=Object(r.useState)(e.match.params.user_id),g=Object(d.a)(y,2),C=g[0],S=(g[1],Object(r.useState)()),k=Object(d.a)(S,2),w=k[0],N=k[1],T=e.match.params.game_id;Object(r.useEffect)((function(){!function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.fetch("/api/sh.get_users",{method:"POST",headers:{"content-type":"application/json;charset=UTF-8"},body:JSON.stringify({lobby_code:c,user_id:C})});case 2:if(!(n=e.sent).ok){e.next=9;break}return e.next=6,n.json();case 6:a=e.sent,i(a.roles),O(null===(r=a.roles.filter((function(e){return e.user_id===C}))[0])||void 0===r?void 0:r.display_role);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(c);var e=new EventSource("/api/sh.events?lobby_code=".concat(c,"&user_id=").concat(C));return e.onmessage=function(e){return B(JSON.parse(e.data))},e.onerror=function(){e.close()},function(){e.close()}}),[]);var B=function(e){N(e)};return Object(m.jsx)(H,{children:Object(m.jsxs)(b.Column,{children:[Object(m.jsx)(b.Columns,{children:Object(m.jsxs)(b.Column,{children:["SecretHitlerPlayer: ",T,Object(m.jsx)("br",{}),Object(m.jsx)(b.Button,{onClick:function(){return v(!x)},children:"Show Role"}),Object(m.jsxs)(b.Modal,{isActive:x,children:[Object(m.jsx)(b.Modal.Background,{onClick:function(){return v(!x)}}),Object(m.jsx)(b.Modal.Close,{onClick:function(){return v(!x)},isLarge:!0}),Object(m.jsx)(b.Modal.Content,{className:L.a.roleModal,children:Object(m.jsx)(b.Box,{children:p})})]})]})}),Object(m.jsx)(G,{users:o,user_id:C,president_id:null===w||void 0===w?void 0:w.president_id,chancellor_id:null===w||void 0===w?void 0:w.chancellor_id})]})})}function I(){return Object(m.jsx)(S.a,{children:Object(m.jsx)("div",{children:Object(m.jsxs)(p.c,{children:[Object(m.jsx)(p.a,{exact:!0,path:"/",children:Object(m.jsx)(C,{})}),Object(m.jsx)(p.a,{path:"/lobby/:game_id",component:T}),Object(m.jsx)(p.a,{path:"/u/lobby/:game_id/:user_id",component:T}),Object(m.jsx)(p.a,{path:"/sh/:game_id",component:P})," ",Object(m.jsx)(p.a,{path:"/u/sh/:game_id/:user_id",component:M})," "]})})})}s.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(I,{})}),document.getElementById("root")),o()},17:function(e,t,n){e.exports={usercard:"usercards_usercard__7rTtc",cardcontainer:"usercards_cardcontainer__3BYRB",president:"usercards_president__3gVsz",youpres:"usercards_youpres__ZxXCp",presblink:"usercards_presblink__3nXq8",pointer:"usercards_pointer__MibXw",liberal:"usercards_liberal__2hGhT",fascist:"usercards_fascist__3nfa-",hitler:"usercards_hitler__3NnTN"}},20:function(e,t,n){e.exports={join:"join_lobby_join__2PI7z",header_banner:"join_lobby_header_banner__15___",input:"join_lobby_input__3rZtB",button:"join_lobby_button__2fuE-"}},21:function(e,t,n){e.exports={bg:"game_info_bg__1TnRo",full:"game_info_full__1n2zS",gameCode:"game_info_gameCode__Xtcpz"}},22:function(e,t,n){e.exports={header:"template_header__3wzHV",mainbody:"template_mainbody__xIUPX",footer:"template_footer__3noNh"}},23:function(e,t,n){e.exports={header:"template_header__3rORQ",mainbody:"template_mainbody__z2h0O",footer:"template_footer__HtiuG"}},28:function(e,t,n){e.exports={join:"create_lobby_join__2RdXN",header_banner:"create_lobby_header_banner__3H6pZ",input:"create_lobby_input__gFxRI",button:"create_lobby_button__3K-pz"}},33:function(e,t,n){e.exports={roleModal:"players_roleModal__2TiA3"}},38:function(e,t,n){}},[[114,1,2]]]);
//# sourceMappingURL=main.d735441f.chunk.js.map